<!doctype html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0,minimum-scale=1.0,user-scalable=0" />
		<title>Git</title>
		<style>
			.class___line_head {
				margin-left : 2em;
			}
			.class___tab_place {
				margin-left : 2em;
			}
			.class___tab {
				display : inline-block;
				width : 4ex;
				overflow-x : hidden;
				line-height : 24px;
				font-size : 18px;
				vertical-align : bottom;
				white-space : pre-wrap;
			}
			.class___center {
				text-align : center;
				width : 100%;
				display : inline-block;
			}
			.shell_instruction, .class___shell, .class___code {
				color : yellow;
				background-color : black;
				font-weight : 800;
				padding : 4px;
			}
			section > p {
				padding-left : 2em;
				line-height : 180%;
			}
			section > div {
				padding-left : 2em;
				line-height : 180%;
			}
		</style>
		<script>
			const add_fold = function(currentScript) {
				const cs = currentScript;
				const pn = cs.parentNode;
				const ppn = pn.parentNode;
				ppn.children[0].addEventListener('click', function(e) {
					let display = pn.style.getPropertyValue('display');
					if (display) {
						ppn.children[0].textContent = '-';
						pn.style.removeProperty('display');
					} else {
						ppn.children[0].textContent = '+';
						pn.style.setProperty('display', 'none');
					}
				});
			}
		</script>
		<style>
			.class___menu_item {
				cursor : pointer;
				color : green;
				box-shadow: 0 0 1px 1px #71f4dc;
			}
			.class___menu_item:hover {
				color : red;
				text-shadow: 2px 2px 2px gray;
				box-shadow: 0 0 4px 4px gray;
			}
			.class___menu_close_button {
				cursor : pointer;
				text-align : center;
				border : 1px solid black;
				margin-top : 10px;
				color : black;
				width: 80px;
				margin-left: calc(50% - 40px);
			}
			.class___menu_close_button:hover {
				color : red;
				text-shadow: 2px 2px 2px gray;
			}
			.class___show_menu_button {
				cursor : pointer;
				text-align : center;
				border : 1px solid black;
				color : black;
				background-color : #f0d278;
				width: 40px;
				height : 40xp;
				position : fixed;
				right : 0;
				top : 0;
			}
			.class___show_menu_button:hover {
				color : red;
				text-shadow: 2px 2px 2px gray;
				text-shadow: 2px 2px 2px gray;
			}
		</style>
		<script>
			{
				const onload_event_function_array = [];
				onload_event_function_array.push((e) => {//添加目录函数
					const dom_array = Object.values(document.body.children[0].children).slice(1);
					const dom__menu = document.createElement('div');
					dom__menu.style.cssText = `
						position: fixed;
						left: 0;
						top: 0;
						height: 100%;
						width: 100%;
						background-color: #f0d278;
						overflow: auto;
					`;
					console.log(dom__menu.style.cssText);
					dom_array.forEach((dom) => {
						const dom__menu_item = document.createElement('div');
						dom__menu_item.className = 'class___menu_item';
						dom__menu_item.textContent = dom.children[0].textContent;
						dom__menu_item.onclick = function(e) {
							dom.scrollIntoView(true);
							dom__menu.style.display = 'none';
						};
						dom__menu.appendChild(dom__menu_item);
					});
					const dom__menu_close_button = document.createElement('div');
					dom__menu_close_button.textContent = '关闭目录';
					dom__menu_close_button.className = 'class___menu_close_button';
					dom__menu_close_button.onclick = (e) => {
						dom__menu.style.display = 'none';
					}
					dom__menu.appendChild(dom__menu_close_button);

					const dom__show_menu_button = document.createElement('div');
					dom__show_menu_button.className = 'class___show_menu_button';
					dom__show_menu_button.textContent = '显示目录';
					dom__show_menu_button.onclick = (e) => {
						//dom__show_menu_button.style.display = 'none';
						dom__menu.style.display = 'block';
					}

					document.body.appendChild(dom__show_menu_button);
					document.body.appendChild(dom__menu);
				});
				window.onload = (e) => {
					onload_event_function_array.forEach((f) => {
						f(e);
					});
				}
			}
		</script>
	</head>
	<body>
		<article>
			<header>
				<h3>Git</h3>
				<div>
					Git spread log.
					<br/>
					<a target="_blank" href="https://git-scm.com/">Git</a>
					<br/>
					<a target="_blank" href="https://git-scm.com/doc">Git - Documentation</a>
					<br/>
					<a target="_blank" href="https://git-scm.com/docs">Git - Reference</a>
					<br/>
					<a target="_blank" href="./refs/git-doc/index.html">git-doc</a>，若在windows上安装了git则在"git_安装路径下/mingw64/share/doc/git-doc/index.html"是帮助文档
					<br/>
					<a target="_blank" href="https://git-scm.com/book/en/v2">Git - Book</a>
					<br/>
					<a target="_blank" href="http://gitbook.liuhui998.com/index.html">Git Community Book 中文版</a>
					<br/>
					<a target="_blank" href="https://mirrors.edge.kernel.org/pub/software/scm/git/docs/">git(1) Manual Page</a>
					<br/>
					<a target="_blank" href="https://www.cnblogs.com/cxx8181602/p/11125539.html">git 配置 https和ssh 免密码登录 常用操作命令 - echo曦 - 博客园</a>
					<br/>
					<a target="_blank" href="https://segmentfault.com/a/1190000006185954">git的reset和checkout的区别 - 颇忒脱 - SegmentFault 思否</a>
					<br/>
					<a target="_blank" href="https://blog.csdn.net/ustccw/article/details/79068547">git放弃修改&放弃增加文件 - 乐呵乐呵 - CSDN博客</a>
					<br/>
					<a target="_blank" href="https://blog.csdn.net/sodaslay/article/details/72948722">git 修改已提交的内容 - CSDN博客</a>
					<br/>
					<a target="_blank" href="https://www.cnblogs.com/qufanblog/p/7606105.html">git 放弃本地修改 - 上官云清 - 博客园</a>
					<br/>
					<a target="_blank" href="https://www.cnblogs.com/x_wukong/p/6837792.html">git push.default设置 - 明明是悟空 - 博客园</a>
				</div>
			</header>
			<section>
				<h3>未分类</h3>
				<div>
					<a target="_blank" href="https://blog.csdn.net/qq_40999917/article/details/103316870">Git merge时使用--no-ff参数_盏茶作酒的博客-CSDN博客_git merge 参数</a>
					<div>
						<span style="display : inline-block; border : 1px solid black; width : 14px; text-align : center;">+</span><span>为防链接失效的本地截图</span>
						<div style="display:none;">
							<script>add_fold(document.currentScript);</script>
							<img src="./refs/imgs/Git merge时使用--no-ff参数.png"/>
						</div>
					</div>
					<a target="_blank" href="https://www.cnblogs.com/itech/p/5188933.html">git代码回滚：Reset、Checkout、Revert的选择 - iTech - 博客园</a>
					<div>
						<span style="display : inline-block; border : 1px solid black; width : 14px; text-align : center;">+</span><span>为防链接失效的本地截图</span>
						<div style="display:none;">
							<script>add_fold(document.currentScript);</script>
							<img src="./refs/imgs/git代码回滚Reset_Checkout_Revert的选择.png"/>
						</div>
					</div>
					<a target="_blank" href="https://www.cnblogs.com/houpeiyong/p/5890748.html">代码回滚：git reset、git checkout和git revert区别和联系 - houpy - 博客园</a>
					<div>
						<span style="display : inline-block; border : 1px solid black; width : 14px; text-align : center;">+</span><span>为防链接失效的本地截图</span>
						<div style="display:none;">
							<script>add_fold(document.currentScript);</script>
							<img src="./refs/imgs/代码回滚_git_reset_git_checkout和git_revert区别和联系.png"/>
						</div>
					</div>
					<a target="_blank" href="https://zhuanlan.zhihu.com/p/83016300">如何保持Git历史整洁 - 知乎</a>
					<div>
						<span style="display : inline-block; border : 1px solid black; width : 14px; text-align : center;">+</span><span>为防链接失效的本地截图</span>
						<div style="display:none;">
							<script>add_fold(document.currentScript);</script>
							<img src="./refs/imgs/如何保持Git历史整洁.png"/>
						</div>
					</div>
					<a target="_blank" href="https://git-scm.com/docs/git-merge">Git - git-merge Documentation</a>
					<div>
						<span style="display : inline-block; border : 1px solid black; width : 14px; text-align : center;">+</span><span>为防链接失效的本地截图</span>
						<div style="display:none;">
							<script>add_fold(document.currentScript);</script>
							<img src="./refs/imgs/Git_git-merge_Documentation.png"/>
						</div>
					</div>
					<a target="_blank" href="https://git-scm.com/docs/git-rebase">Git - git-rebase Documentation</a>
					<div>
						<span style="display : inline-block; border : 1px solid black; width : 14px; text-align : center;">+</span><span>为防链接失效的本地截图</span>
						<div style="display:none;">
							<script>add_fold(document.currentScript);</script>
							<img src="./refs/imgs/Git_git-rebase_Documentation.png"/>
						</div>
					</div>
					<a target="_blank" href="https://git-scm.com/docs/git-reset">Git - git-reset Documentation</a>
					<div>
						<span style="display : inline-block; border : 1px solid black; width : 14px; text-align : center;">+</span><span>为防链接失效的本地截图</span>
						<div style="display:none;">
							<script>add_fold(document.currentScript);</script>
							<img src="./refs/imgs/Git_git-reset_Documentation.png"/>
						</div>
					</div>
				</div>
			</section>
			<section>
				<h3>取消 git add</h3>
				<div>
					<span class="class___shell">git reset -- file_name</span>
					<br/>
					其中 file_name 为要取消 git add 的文件
					<br/>
					<span class="class___shell">git reset HEAD</span>
					<br/>
					为取消添加到暂存区的全部文件
					<br/>
					<span class="class___shell">git reset .</span>
					<br/>
					为取消当前路径下添加到暂存区的文件

					<br/>
					<br/>
					<br/>
					<span class="class___shell">git rm --cached file_name</span>
					<br/>
					不会删除文件，仅撤销 file_name 指定名称的文件添加到暂存区的操作
					<br/>
					<span class="class___shell">git rm --cached .</span>
					<br/>
					为取消当前路径下添加到暂存区的文件
				</div>
			</section>
			<section>
				<h3>git stash</h3>
				<div>
					<span class="class___shell">git stash</span><br/>
					将当前文件夹中的已被追踪的文件的修改贮藏到贮藏栈中(无论文件是否被<span class="class___shell">git add</span>添加到缓冲区中)，然后将所有被贮藏的文件恢复到上次提交(即<span class="class___shell">git commit</span>)的状态
					<br/>
					<br/>
					<span class="class___shell">git stash save '备注'</span><br/>
					与<span class="class___shell">git stash</span>功能一样但可以添加说明文字，已被抛弃，用下面的命令替代
					<br/>
					<br/>
					<span class="class___shell">git stash push</span><br/>
					是<span class="class___shell">git stash</span>的不省略push的写法，用于替代<span class="class___shell">git stash save</span>，若要记录备注可加参数 -m "备注"，如<span class="class___shell">git stash push -m "备注"</span>
					<br/>
					<br/>
					<span class="class___shell">git stash list</span><br/>
					可以使用<span class="class___shell">git stash list</span>查看贮藏栈，每次贮藏记录以 stash@{编号}: 开头，该编号为从0开始的整数，注意这里0是最后一次贮藏记录的编号，每次添加时会先将贮藏记录所有的贮藏记录编号加1然后再将新贮藏记录的编号设置为0，也就是数越大越旧
					<br/>
					<br/>
					<span class="class___shell">git stash show</span><br/>
					可以使用<span class="class___shell">git stash show</span>来查看最后一次贮藏中的文件与当前目录的文件差异，
					要想查看具体的内容差异可以加参数 -p 如<span class="class___shell">git stash show -p</span>，
					也可指定贮藏栈中的贮藏记录，如查看贮藏栈中第2新的贮藏记录与当前目录的文件的详细差异<span class="class___shell">git stash show -p stash@{1}</span>
					<br/>
					<br/>
					<span class="class___shell">git stash pop</span><br/>
					可以使用<span class="class___shell">git stash pop</span>将最后一次使用<span class="class___shell">git stash</span>的贮藏取回，并删除最后一次贮藏
					也可以指定使用哪次贮藏记录如使用第2新的贮藏记录<span class="class___shell">git stash pop stash@{1}</span>
					<br/>
					<br/>
					<span class="class___shell">git stash apply stash@{编号}</span><br/>
					还可以指定取回哪次贮藏，但取回的贮藏不会被删除，也可省略stash@{编号}
					<br/>
					<br/>
					<span class="class___shell">git stash drop</span><br/>
					删除贮藏记录，也可指定删除哪条贮藏记录，如删除第2新的贮藏记录<span class="class___shell">git stash drop stash@{1}</span>
					<br/>
					<br/>
					<span class="class___shell">git stash clear</span><br/>
					清空贮藏栈
				</div>
			</section>
			<section>
				<h3>git 忽略文件属性差异</h3>
				<div>
					例如同一文件在windows环境下和在linux环境下文件属性会不同, 用 git status 会提示文件有修改, 可以设置当前的git项目忽略文件属性的差异
					<br/>
					使用<span class="class___shell">git config core.filemode false</span>
					<br/>
					可以通过<span class="class___shell">git config --local --list</span>来查看此项设置
					<br/>
					或查看当前项目目录下.git/config文件是否有
					<div class="class___code">
						[core]<br/>
						<span class="class___tab">&#9;</span>filemode&nbsp;=&nbsp;false<br/>
					</div>
				</div>
			</section>
			<section>
				<h3>git rebase 错误</h3>
				<div>
					使用<span class="class___shell">git rebase -i HEAD</span>后,
					<br/>
					后面用git commit提交了文件
					<br/>
					再使用<span class="class___shell">git status </span>总是提示类似的如下信息(用*表示任意信息):
					<div class="class___code">
						On&nbsp;branch&nbsp;master<br/>
						No&nbsp;commands&nbsp;done.<br/>
						Next&nbsp;command&nbsp;to&nbsp;do&nbsp;(1&nbsp;remaining&nbsp;command):<br/>
						&nbsp;&nbsp;&nbsp;edit&nbsp;52fc594&nbsp;****************************************************************************************************<br/>
						&nbsp;&nbsp;(use&nbsp;"git&nbsp;rebase&nbsp;--edit-todo"&nbsp;to&nbsp;view&nbsp;and&nbsp;edit)<br/>
						You&nbsp;are&nbsp;currently&nbsp;editing&nbsp;a&nbsp;commit&nbsp;during&nbsp;a&nbsp;rebase.<br/>
						&nbsp;&nbsp;(use&nbsp;"git&nbsp;commit&nbsp;--amend"&nbsp;to&nbsp;amend&nbsp;the&nbsp;current&nbsp;commit)<br/>
						&nbsp;&nbsp;(use&nbsp;"git&nbsp;rebase&nbsp;--continue"&nbsp;once&nbsp;you&nbsp;are&nbsp;satisfied&nbsp;with&nbsp;your&nbsp;changes)<br/>
					</div>
					用提示的<span class="class___shell">git rebase --continue</span>无效
					<br/>
					若用<span class="class___shell">git rebase --abort</span>会导致后面提交失效, 想取消调rebase同时保留柱rebase后commit的文件及信息
					<br/>
					查阅<a target="_blank" href="https://git-scm.com/docs/git-rebase">Git - git-rebase Documentation</a>
					<br/>
					使用<span class="class___shell">git rebase master</span>提示如下:
					<div class="class___code">
						It&nbsp;seems&nbsp;that&nbsp;there&nbsp;is&nbsp;already&nbsp;a&nbsp;rebase-merge&nbsp;directory,&nbsp;and<br/>
						I&nbsp;wonder&nbsp;if&nbsp;you&nbsp;are&nbsp;in&nbsp;the&nbsp;middle&nbsp;of&nbsp;another&nbsp;rebase.&nbsp;&nbsp;If&nbsp;that&nbsp;is&nbsp;the<br/>
						case,&nbsp;please&nbsp;try<br/>
						<span class="class___tab">&#9;</span>git&nbsp;rebase&nbsp;(--continue&nbsp;|&nbsp;--abort&nbsp;|&nbsp;--skip)<br/>
						If&nbsp;that&nbsp;is&nbsp;not&nbsp;the&nbsp;case,&nbsp;please<br/>
						<span class="class___tab">&#9;</span>rm&nbsp;-fr&nbsp;"**********/.git/rebase-merge"<br/>
						and&nbsp;run&nbsp;me&nbsp;again.&nbsp;&nbsp;I&nbsp;am&nbsp;stopping&nbsp;in&nbsp;case&nbsp;you&nbsp;still&nbsp;have&nbsp;something<br/>
						valuable&nbsp;there.<br/>
					</div>
					手动删除/.git/rebase-merge文件夹后用<span class="class___shell">git status </span>不再提示rebase的问题
					<br/>
					<br/>
					<br/>
					<br/>
					<a target="_blank" href="https://zhuanlan.zhihu.com/p/75499871">git merge和git rebase的区别, 切记：永远用rebase - 知乎</a>
				</div>
			</section>
			<section>
				<h3>git log 查看提交记录详细信息</h3>
				<div>
					<a target="_blank" href="https://git-scm.com/book/en/v2/Git-Basics-Viewing-the-Commit-History">Git - Viewing the Commit History</a>
					<br/>
					<a target="_blank" href="https://git-scm.com/book/zh/v2/Git-%E5%9F%BA%E7%A1%80-%E6%9F%A5%E7%9C%8B%E6%8F%90%E4%BA%A4%E5%8E%86%E5%8F%B2">Git - 查看提交历史</a>
					<br/>
					使用<span class="class___shell">git log -p</span>显示每次提交所引入的差异
					<br/>
					通过参数 -正整数 来指定显示最近几次提交记录
					<br/>
					例如使用 -2 选项来只显示最近的两次提交
					<br/>
					<span class="class___shell">git log -p -2</span>
					<br/>
					使用<span class="class___shell">git log -stat</span>显示每次提交简略统计信息
					<br/>
					使用<span class="class___shell">git show</span>显示最近一次修改差异
					<br/>
					使用<span class="class___shell">git show commit_id</span>显示commit_id的那次修改差异
					<br/>
					使用<span class="class___shell">git show commit_id filename</span>显示commit_id的那次修改的filename指定的文件差异
					<br/>
					使用<span class="class___shell">git diff --staged</span>
					或
					<br/>
					<span class="class___shell">git diff --cached</span>查看缓存区即<span class="class___shell">git add</span>的文件和上次提交的不同
					<br/>
					使用<span class="class___shell">git diff</span>显示工作目录和暂存区之间的不同
					<br/>
					使用<span class="class___shell">git diff HEAD</span>显示工作目录和上一条提交之间不同
				</div>
			</section>
			<section>
				<h3>git https 免密</h3>
				<div>
					git用https方式通信时每次都需要输入帐号和秘密, 有2种方式可以记住密码
					<br/>
					第1种:
					<br/>
					再url中https://的后面添加username:password@即在url中明文添加用户名和密码, 举例, 如url为https://path
					<br/>
					<span class="class___shell">git clone https://username:password@path</span>
					<br/>
					此种方法在用
					<span class="class___shell">git remote -v</span>
					命令查看url时显示的也是clone时用的带用户名与密码的url, 并明文存储在.git/config文件中
					<br/>
					<br/>
					第2种:
					<br/>
					修改配置文件
					<br/>
					如修改全局配置文件
					<br/>
					<span class="class___shell">git config --global credential.helper store</span>
					<br/>
					执行后会在~/.gitconfig文件中有如下内容:
					<div class="class___code">
						[credential]<br/>
						&nbsp;&nbsp;&nbsp;&nbsp;helper&nbsp;=&nbsp;store<br/>
					</div>
					之后我们clone项目时只需要首次输入用户名与密码
					<br/>
					密码会明文存储在~/.git-credentials文件中
					<br/>
					内容为:
					<div class="class___code">
					https://username:password@域名
					</div>
					域名如github.com
					<br/>
					我们也可以手动创建此文件
					<br/>
					<span class="class___shell">git config --global credential.helper</span>除了store还可以指定别的参数
					<br/>
					store 永久存储
					<br/>
					cache 缓存15分钟
					<br/>
					'cache --timeout=600' 缓存10分钟
					<br/>
					<br/>
					配置文件可以是全局的也可以是局部的
					<br/>
					<span class="class___shell">git config credential.helper store</span>
					<br/>
					或系统的，将--global改为--system
					<br/>
					局部的优先级最高，其次是全局的--global，最后是系统的--system
					<br/>
					设置账户
					<br/>
					<span class="class___shell">git config credential.username "username"</span>
					<br/>
					删除存储在配置文件中的用户名和密码
					<br/>
					<span class="class___shell">git config --global --unset credential.helper</span>

					<br/>
					<br/>
					帮助:
					<br/>
					<span class="class___shell">man gitcredentials</span>
					<br/>
					<span class="class___shell">git help credential-cache</span>
				</div>
			</section>
			<section>
				<h3>git 复制大项目断点续传</h3>
				<div>
					当项目比较大或网速较低的情况下会导致git clone不能成功
					<br/>
					可以在<span class="class___shell">git clone</span>时加上参数<span class="">--depth=1</span>指定进行浅(shallow)拷贝, 即只拷贝一个分支的最后一个节点, 含有最后一次的提交记录及最后一次提交后完整的文件树, 从而只先复制一部分的数据
					<br/>
					可以用<span class="class___shell">git fetch --depth=3</span>或<span class="">git fetch --deepen=3</span>来拷贝更多的历史即提交记录, 如此处的3就是3条提交记录, 若为2就是2条提交记录
					<br/>
					最后用<span class="class___shell">git fetch --unshallow</span>或<span class="class___shell">git pull --unshallow</span>将浅拷贝的库转换为完整的存储库，消除浅存储库所施加的所有限制. 所有的分支都被复制下来
					<br/>
					<br/>
					另一个方法是现在本地建一个与项目同名的文件夹, 然后用<span class="class___shell">git init</span>初始化
					<br/>
					再用<span class="class___shell">git fetch --depth=1 url</span>复制
					<br/>
					然后用<span class="class___shell">git checkout FETCH_HEAD</span>检出到HEAD分支
					<br/>
					若用<span class="class___shell">git fetch --depth=1 url branch_name</span>复制则可省略上面检出那步
					<br/>
					最后用<span class="class___shell">git fetch --unshallow</span>或<span class="class___shell">git pull --unshallow</span>将浅拷贝的库转换为完整的存储库，消除浅存储库所施加的所有限制. 所有的分支都被复制下来
					<br/>
					<br/>
					可参考:
					<br/>
					<a target="_blank" href="https://git-scm.com/docs/git-fetch">Git - git-fetch Documentation</a>
					<br/>
					<a target="_blank" href="https://git-scm.com/docs/git-clone">Git - git-clone Documentation</a>
					<br/>
					<a target="_blank" href="https://git-scm.com/docs/git-checkout">Git - git-checkout Documentation</a>
				</div>
			</section>
			<section>
				<h3>git rm filename with git rm --cached filename</h3>
				<div>
					git rm filename： 同时从工作区和索引中删除文件。即本地的文件也被删除了。
					<br/>
					git rm --cached filename： 从索引中删除文件。但是本地文件还存在， 只是不希望这个文件被版本控制。
				</div>
			</section>
			<section>
				<h3>git diff, git diff --cached, git diff --staged, git diff HEAD</h3>
				<div>
					<span class="">git diff : 對工作區(未使用 git add 的文件)和暫存區(使用 git add 的文件)進行比較</span>
					<br/>
					<span class="">git diff --cached : 對暫存區(使用 git add 的文件)和版本庫(使用 git commit 之後的文件)進行比較</span>
					<br/>
					<span class="">git diff --staged : 與 git diff --cached 相同, 對暫存區(使用 git add 的文件)和版本庫(使用 git commit 之後的文件)進行比較</span>
					<br/>
					<span class="">git diff : HEAD : 對工作區(未使用 git add 的文件)和版本庫(使用 git commit 之後的文件)進行比較</span>
					<br/>
				</div>
			</section>
			<section>
				<h3>git remove remote branch</h3>
				<div>
					<span class="shell_instruction">git push 遠程庫名稱如origin -d 分支名稱</span>
					<br/>
					or
					<br/>
					<span class="shell_instruction">git push 遠程庫名稱如origin : 分支名稱</span>
				</div>
			</section>
			<section>
				<h3>单本地账号使用多账号git ssh key</h3>
				<div>
					在本地操作系统当前账户下同时使用多个github账号
					<br/>
					使用多个github账号的原理是利用~/.ssh/下的config文件配置域名转换类似于DNS, 根据配置文件中的映射关系将不同的域名转换成映射中对应的域名及ssh key
					<br/>
					举例说明:
					<br/>
					例如使用3个github账号, 账号名分别为"job_work", "person_work", "person_home"
					<br/>
					参考下面的git server via ssh在~/.ssh/路径下生成多个ssh key
					#create ssh key, after -C is comment
					<br/>
					<span class="shell_instruction">ssh-keygen -t rsa -C client_user_name</span>
					<br/>
					依照上一行的命令生成多个ssh key, 每次会在生成时选择文件名, 输入不同的文件名否则会使用默认的文件名并相互覆盖,
					然后将文件放置到~/.ssh/路径下
					<br/>
					在此例子中各账号生成的ssh key分别为
					<br/>
					job_work:
					<br/>
					<span class="class___tab_place"></span>id_rsa_job_work,
					<br/>
					<span class="class___tab_place"></span>id_rsa_job_work.pub,
					<br/>
					person_work:
					<br/>
					<span class="class___tab_place"></span>id_rsa_person_work,
					<br/>
					<span class="class___tab_place"></span>id_rsa_person_work.pub,
					<br/>
					person_home:
					<br/>
					<span class="class___tab_place"></span>id_rsa
					<br/>
					<span class="class___tab_place"></span>id_rsa.pub
					<br/>
					其中person_home账户设置为默认的文件名
					<br/>
					将三个.pub文件分别设置到github账户上
					<br/>
					修改~/.ssh/路径下的配置config文件, 若没有可以新建一个, ~表示当前用户的目录路径, 修改内容如下:
					<br/>
					<div class="class___code">
						Host&nbsp;job_work_host<br/>
						<span class="class___tab">&#9;</span>HostName&nbsp;github.com<br/>
						<span class="class___tab">&#9;</span>IdentityFile&nbsp;~/.ssh/id_rsa_job_work<br/>
						<br/>
						Host&nbsp;person_work_host<br/>
						<span class="class___tab">&#9;</span>HostName&nbsp;github.com<br/>
						<span class="class___tab">&#9;</span>IdentityFile&nbsp;~/.ssh/id_rsa_person_work<br/>
						<br/>
						#Host&nbsp;person_home_host<br/>
						#<span class="class___tab">&#9;</span>HostName&nbsp;github.com<br/>
						#<span class="class___tab">&#9;</span>IdentityFile&nbsp;~/.ssh/id_rsa<br/>
						#<span class="class___tab">&#9;</span>Port&nbsp;443<br/>
					</div>
					其中person_home被注释了, 因为person_home账户设置为默认的文件名所以可以不配置此项
					<br/>
					其中Host&nbsp;job_work_host表示当遇到域名job_work_host时会进行转换, 转换的值为HostName&nbsp;github.com中配置的github.com, 即将job_work_host转换为github.com并使用~/.ssh/id_rsa_job_work的文件作为ssh key
					<br/>
					注意:若是在windows下需将其中的~替换成绝对路径并将/改成\\
					<br/>
					测试是否配置成功
					<br/>
					<span class="shell_instruction">ssh -T git@job_work_host</span>
					<br/>
					<span class="shell_instruction">ssh -T git@person_work_host</span>
					<br/>
					因为person_home账户设置为默认的文件名所以可以不测试
					<br/>
					git clone 项目
					<br/>
					在此例子中各账号的git项目为"project1", "project2", "project3"
					<br/>
					job_work:
					<br/>
					<span class="class___tab_place"></span>原url : git@github.com:job_work/project1.git,
					<br/>
					<span class="class___tab_place"></span>使用url : git@job_work_host:job_work/project1.git
					<br/>
					<span class="class___tab_place"></span>修改远程仓库URL<span class="shell_instruction">git remote set-url origin git@job_work_host:job_work/project1.git</span>
					<br/>
					person_work:
					<br/>
					<span class="class___tab_place"></span>原url : git@github.com:person_work/project2.git,
					<br/>
					<span class="class___tab_place"></span>使用url : git@person_work_host:person_work/project2.git
					<br/>
					<span class="class___tab_place"></span>修改远程仓库URL<span class="shell_instruction">git remote set-url origin git@person_work_host:person_work/project2.git</span>
					<br/>
					person_home:
					<br/>
					<span class="class___tab_place"></span>原url : git@github.com:person_home/project3.git,
					<br/>
					<span class="class___tab_place"></span>使用url : git@github.com:person_home/project3.git,
					<br/>
					<span class="class___tab_place"></span>因为person_home使用默认ssh key文件名所以无需改变
					<br/>
					<br/>
					<br/>
					若ssh使用的22端口被封可以使用https的443端口, 在此之前需要先测试一下443端口的方式是否可用
					<br/>
					<span class="shell_instruction">ssh -T -p 443 git@ssh.github.com</span>
					若出现
					<span class="shell_instruction">Hi username! You've successfully authenticated, but GitHub does not provide shell access.</span>
					则说明443端口的方式行得通
					<br/>
					修改~/.ssh/路径下的配置config文件内容如下:
					<div class="class___code">
						Host&nbsp;job_work_host<br/>
						<span class="class___tab">&#9;</span>HostName&nbsp;ssh.github.com<br/>
						<span class="class___tab">&#9;</span>IdentityFile&nbsp;~/.ssh/id_rsa_job_work<br/>
						<span class="class___tab">&#9;</span>Port&nbsp;443<br/>
						<br/>
						Host&nbsp;person_work_host<br/>
						<span class="class___tab">&#9;</span>HostName&nbsp;ssh.github.com<br/>
						<span class="class___tab">&#9;</span>IdentityFile&nbsp;~/.ssh/id_rsa_person_work<br/>
						<span class="class___tab">&#9;</span>Port&nbsp;443<br/>
						<br/>
						Host&nbsp;github.com<br/>
						<span class="class___tab">&#9;</span>HostName&nbsp;ssh.github.com<br/>
						<span class="class___tab">&#9;</span>IdentityFile&nbsp;~/.ssh/id_rsa<br/>
						<span class="class___tab">&#9;</span>Port&nbsp;443<br/>
					</div>
					这样就可以通过443端口使用ssh了
					<br/>
					此时再测试
					<span class="shell_instruction">ssh -T git@github.com</span>
					也出现
					<span class="shell_instruction">Hi username! You've successfully authenticated, but GitHub does not provide shell access.</span>
				</div>
			</section>
			<section>
				<h3>key_exchange_identification: Connection closed by remote host</h3>
				<div>
					删除 ~/.ssh/known_hosts 文件
					<br/>
					原因:
					<br/>
					首次通过ssh登录远程主机时，会提示
					<div class="class___shell">
						The authenticity of &lt;hostname&gt;'XXX.XXX.XXX.XXX' can't be established.
						<br/>
						RSA key fingerprint is XX:XX:XX:XX:XX:XX:XX:XX:XX:XX:XX:XX:XX:XX:XX:XX
						<br/>
						Are you sure you want to continue connecting (yes/no)?
					</div>
					意思是本地机无法确认远程主机的真实性，需要用户判断是否信任传来的RSA Key FingerPrint，键入yes后，接着就会提示：
					<div class="class___shell">
						Warning: Permanently added 'XXXX, XXX.XXX.XXX.XXX'(RSA)to the list of known hosts.
					</div>
					然后输入远程主机密码就可以正常登录了。
					<br/>
					此时意味着本地机已经接受了远程主机，并且会将此公钥保存在/.ssh/known_hosts中，以便之后的验证。
				</div>
			</section>
			<section>
				<h3>git server via ssh</h3>
				<div>
					#in server
					<br/>
					#use vim edit sshd_config file
					<br/>
					#find "Port 22", in the line head delete "#" to enable this configuration item
					<br/>
					#find "Protocol 2", in the line head delete "#" to enable this configuration item
					<br/>
					#find "PubkeyAuthentication yes", in the line head delete "#" to enable this configuration item
					<br/>
					#find "AuthorizedKeysFile  .ssh/authorized_keys", in the line head delete "#" to enable this configuration item
					<br/>
					#if use ssh connect sshd server appear "The authenticity of host '192.168.8.101 (192.168.8.101)' can't be established.", then use vim edit /etc/ssh/ssh_config file, set StrictHostKeyChecking no
					<br/>
					#create a user name is git
					<br/>
					<span class="shell_instruction">adduser git</span>
					<br/>
					#set git user password
					<br/>
					<span class="shell_instruction">passwd git</span>
					<br/>
					#change to git user
					<br/>
					<span class="shell_instruction">su git</span>
					<br/>
					#change path to git user home path
					<br/>
					<span class="shell_instruction">cd ~</span>
					<br/>
					#create a empty git bare repository, repository_name is the new repository name
					<br/>
					<span class="shell_instruction">git init --bare repository_name.git</span>
					<br/>
					#if .ssh folder not exist then create .ssh folder
					<br/>
					<span class="shell_instruction">mkdir .ssh</span>

					<br/>
					<br/>
					#in client
					<br/>
					#create ssh key, after -C is comment
					<br/>
					<span class="shell_instruction">ssh-keygen -t rsa -C client_user_name</span>
					<br/>
					#change path to .ssh path
					<br/>
					<span class="shell_instruction">cd ~/.ssh</span>
					<br/>
					#copy id_rsa.pub file to server, git is server username, 192.168.1.110 is server ip
					<br/>
					<span class="shell_instruction">scp id_rsa.pub git@192.168.1.110:id_rsa.pub</span>

					<br/>
					<br/>
					#in server
					<br/>
					#export the client id_rsa.pub file content to ~/.ssh/authorized_keys file
					<br/>
					<span class="shell_instruction">cd ~</span>
					<br/>
					<span class="shell_instruction">cat id_rsa.pub &gt;&gt; .ssh/authorized_keys</span>
					<br/>
					#set git user ssh only use git shell, edit /etc/passwd file
					<br/>
					<span class="shell_instruction">vim /etc/passwd</span>
					<br/>
					#change
					<br/>
					<span style="color : blue;">git:x:1001:1001::/home/git:/bin/bash</span>
					<br/>
					#to
					<br/>
					<span style="color : blue;">git:x:1001:1001::/home/git:/usr/bin/git-shell</span>
					<br/>
					#if you don't want input git user's login password do the next two step
					<br/>
					#change .ssh authority
					<br/>
					<span class="shell_instruction">chmod 700 ~/.ssh</span>
					<br/>
					#change .ssh/authorized_keys authority
					<br/>
					<span class="shell_instruction">chmod 600 ~/.ssh/authorized_keys</span>


					<br/>
					<br/>
					#in client
					<br/>
					#clone the new repository from server
					<br/>
					<span class="shell_instruction">git clone git@192.168.1.110:repository_name.git</span>
				</div>
			</section>
			<section>
				<h3>git server</h3>
				<div>
					//install git and git-daemon
					<br/>
					<br/>
					//generate rsa key pair with the follow instruct
					<br/>
					<span class="shell_instruction">ssh-keygen -t rsa -C comment</span>
					<br/>
					<br/>
					//create a empty file in ~/.ssh/
					<br/>
					<span class="shell_instruction">cd ~/.ssh/</span>
					<br/>
					<span class="shell_instruction">touch authorized_keys</span>
					<br/>
					<br/>
					//export rsa public key file content to authorized_keys file
					<br/>
					<span class="shell_instruction">cat ~/.ssh/id_rsa.pub &gt;&gt; ~/.ssh/authorized_keys</span>
					<br/>
					//note : every client need export the res public key file content to the server's authorized_keys
					<br/>
					<br/>
					//set sshd server
					<br/>
					<span class="shell_instruction">cd /etc/ssh</span>
					<br/>
					//use vim edit sshd_config file
					<br/>
					//find "Port 22", in the line head delete "#" to enable this configuration item
					<br/>
					//find "Protocol 2", in the line head delete "#" to enable this configuration item
					<br/>
					//find "PubkeyAuthentication yes", in the line head delete "#" to enable this configuration item
					<br/>
					//find "AuthorizedKeysFile  .ssh/authorized_keys", in the line head delete "#" to enable this configuration item
					<br/>
					#if use ssh connect sshd server appear "The authenticity of host '192.168.8.101 (192.168.8.101)' can't be established.", then use vim edit /etc/ssh/ssh_config file, set StrictHostKeyChecking no
					<br/>
					<br/>
					//restart sshd server
					<br/>
					<span class="shell_instruction">service sshd restart</span>
					<br/>
					<br/>
					//use mkdir to crate a folder as the git repository
					<br/>
					<span class="shell_instruction">mkdir git_base</span>
					<br/>
					<span class="shell_instruction">cd git_base</span>
					<br/>
					<br/>
					//initialization a git repository,the repositoy_name is your project name, create a empty file
					<br/>
					<span class="shell_instruction">git init --bare repository_name.git</span>
					<br/>
					<span class="shell_instruction">touch repositoy_name.git/git-daemon-export-ok</span>
					<br/>
					<br/>
					//start git protocol sever
					<br/>
					<span class="shell_instruction">git daemon --reuseaddr --base-path=~/git_base</span>
					<br/>
					<br/>

					//in client clone the project code
					<br/>
					//the format is git clone http://username:password@127.0.0.1/repositoy_name.git
					<br/>
					<span class="shell_instruction">git clone git://127.0.0.1/repositoy_name.git</span>
					<br/>
					//or
					<br/>
					<span class="shell_instruction">git clone username@localhost:/repositoy_name.git</span>
					<br/>
				</div>
			</section>
		</article>
	</body>
</html>
